<!DOCTYPE html>
<html class="light" dir="<%= locale === 'ar' ? 'rtl' : 'ltr' %>" lang="<%= locale %>">

<head>
    <%- include('../../../partials/head') %>
</head>

<body class="bg-[#f8f9fa] dark:bg-[#1a0c10] text-[#181113] dark:text-white transition-colors duration-200">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <%- include('../../../partials/sidebar', { role: 'owner' }) %>

            <!-- Main Content -->
            <main class="flex-1 <%= locale === 'ar' ? 'md:mr-64' : 'md:ml-64' %> transition-all p-8 relative">
                <!-- Flash Messages -->
                <%- include('../../../partials/flash') %>

                    <!-- Top Bar -->
                    <header class="flex items-center justify-between mb-8">
                        <div>
                            <h1 class="text-2xl font-bold">ูุฑุญุจุงูุ <%= user ? user.name : 'ุตุงุญุจุฉ ุงูุตุงููู' %> ๐</h1>
                            <p class="text-[#896170]">ุฅููู ููุฎุต ุฃุฏุงุก ุตุงูููู ุงูููู</p>
                        </div>
                        <div class="flex items-center gap-4">
                            <%- include('../../../partials/theme-toggle') %>
                                <!-- Notification Button (if needed, otherwise remove) -->
                                <!-- <button class="group relative p-2 rounded-full bg-white dark:bg-[#2d1a22] border-2 border-[#e6dbdf] dark:border-[#3d252e] hover:border-primary transition-colors">
                            <span class="material-symbols-outlined text-[#896170] group-hover:text-primary transition-colors">notifications</span>
                            <span class="absolute top-0 right-0 block h-2 w-2 rounded-full ring-2 ring-white bg-red-400"></span>
                        </button> -->
                                <div
                                    class="h-10 w-10 rounded-full bg-primary text-white flex items-center justify-center font-bold overflow-hidden border-2 border-white dark:border-[#2d1a22] shadow-sm">
                                    <% if (user && user.avatar) { %>
                                        <img src="<%= user.avatar %>" class="w-full h-full object-cover object-center">
                                        <% } else { %>
                                            <%= user ? user.name.charAt(0).toUpperCase() : 'S' %>
                                                <% } %>
                                </div>
                        </div>
                    </header>

                    <% if (salon && salon.is_active===false) { %>
                        <!-- Ban Warning Alert -->
                        <div
                            class="mb-8 p-6 bg-red-50 dark:bg-red-900/10 border-r-4 border-red-500 rounded-2xl flex items-start gap-4 animate-shake">
                            <div class="bg-red-100 dark:bg-red-900/30 p-3 rounded-xl text-red-600">
                                <span class="material-symbols-outlined text-2xl">block</span>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-lg font-bold text-red-800 dark:text-red-200 mb-1">ุญุณุงุจ ุงูุตุงููู ูุญุธูุฑ
                                    ูุคูุชุงู
                                </h3>
                                <p class="text-sm text-red-700 dark:text-red-300 leading-relaxed mb-3">
                                    ูุนุชุฐุฑ ููููุ ุชู ุฅููุงู ุธููุฑ ุตุงููููู ูู ูุชุงุฆุฌ ุงูุจุญุซ ูู ูุจู ุงูุฅุฏุงุฑุฉ. ูุฐุง ุงูุฅุฌุฑุงุก ูุฏ ูููู
                                    ุจุณุจุจ ูุฎุงููุฉ ุงูุดุฑูุท ุฃู ุงูุญุงุฌุฉ ูุชุญุฏูุซ ุงูุจูุงูุงุช.
                                </p>
                                <div class="flex items-center gap-4">
                                    <a href="mailto:support@kwafer.com"
                                        class="bg-red-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-red-700 transition-colors">ุชูุงุตู
                                        ูุน ุงูุฏุนู</a>
                                    <span class="text-[10px] text-red-500 font-medium italic">ุณูุธู ุจุฅููุงููู ุฅุฏุงุฑุฉ
                                        ุฎุฏูุงุชูู
                                        ูุนุฑูุถูู ุฏุงุฎููุงู ุญุชู ุญู ุงููุดููุฉ.</span>
                                </div>
                            </div>
                        </div>
                        <% } else if (!salon || !salon.id) { %>
                            <!-- Incomplete Profile Warning - More Direct Modal-like Alert -->
                            <div
                                class="mb-10 p-1 bg-gradient-to-r from-orange-400 via-pink-500 to-primary rounded-[2.6rem] shadow-2xl shadow-primary/10 animate-float">
                                <div
                                    class="bg-white dark:bg-[#1a0c10] rounded-[2.5rem] p-8 flex flex-col md:flex-row items-center gap-8">
                                    <div
                                        class="size-20 bg-gradient-to-br from-orange-400 to-pink-500 text-white rounded-[2rem] flex items-center justify-center shadow-lg transform rotate-3 shrink-0">
                                        <span class="material-symbols-outlined text-4xl filled">add_business</span>
                                    </div>
                                    <div class="flex-1 text-center md:text-right">
                                        <h3
                                            class="text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-600 to-primary mb-2">
                                            ุฌูุฒู ุตุงูููู ูุงุณุชูุจุงู ุงูุนูููุงุช! ๐</h3>
                                        <p
                                            class="text-[#896170] dark:text-gray-300 font-bold leading-relaxed max-w-2xl">
                                            ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ูุตุงูููู ุจุนุฏ. ุฃูููู ุงูููู ุงูุชุนุฑููู ุงูุขู ูุชุธูุฑู ูู
                                            ูุชุงุฆุฌ ุงูุจุญุซ ูุชุจุฏุฆู ูู ุงุณุชูุจุงู ุงูุญุฌูุฒุงุช.
                                        </p>
                                    </div>
                                    <a href="#salonName"
                                        class="flex items-center gap-3 bg-primary text-white px-10 py-5 rounded-2xl font-black text-lg hover:bg-primary-dark transition-all shadow-xl hover:scale-105 active:scale-95 shimmer">
                                        <span>ุฅููุงู ุงูุจูุงูุงุช ุงูุขู</span>
                                        <span class="material-symbols-outlined">rocket_launch</span>
                                    </a>
                                </div>
                            </div>
                            <% } %>

                                <% if (salon && salon.id) { %>
                                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                                        <!-- Subscription Counter -->
                                        <div class="lg:col-span-1">
                                            <%- include('../../../partials/subscription-counter') %>
                                        </div>

                                        <!-- Quick Actions or Ads could go here -->
                                        <div class="lg:col-span-2 space-y-6">
                                            <!-- You can add marketing banners or tips here -->
                                            <div
                                                class="bg-gradient-to-r from-primary/10 to-[#ff4d8d]/10 rounded-3xl p-6 border border-primary/10 flex items-center justify-between">
                                                <div>
                                                    <h3 class="text-xl font-black gradient-text mb-2">ุทูุฑู ุตุงููููู ุงูุขู!
                                                        ๐
                                                    </h3>
                                                    <p class="text-sm text-[#896170] dark:text-gray-400">ุงุญุตูู ุนูู
                                                        ุงููุฒูุฏ ูู
                                                        ุงูุญุฌูุฒุงุช ูู ุฎูุงู ุชูุนูู ุงูุนุฑูุถ ุงูุฎุงุตุฉ.</p>
                                                </div>
                                                <a href="/dashboard/owner/offers"
                                                    class="px-6 py-3 bg-white dark:bg-[#2d1a22] text-primary font-bold rounded-xl shadow-md hover:shadow-lg transition-all">
                                                    ุฃุถููู ุนุฑุถ
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <% } %>

                                        <!-- Stats Grid -->
                                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                                            <div
                                                class="bg-white dark:bg-[#2d1a22] p-6 rounded-xl border-2 border-[#e6dbdf] dark:border-[#3d252e] shadow-sm card-hover">
                                                <div class="flex items-center justify-between mb-4">
                                                    <h3 class="text-[#896170] font-medium">ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช</h3>
                                                    <span
                                                        class="bg-green-100 text-green-600 p-2 rounded-lg material-symbols-outlined text-xl">payments</span>
                                                </div>
                                                <p class="text-3xl font-bold text-green-600">
                                                    <%= stats ? stats.totalRevenue : 0 %> <span
                                                            class="text-sm font-normal">ุฌ.ู</span>
                                                </p>
                                                <div class="text-[#896170] text-sm mt-2">ุงูุฃุฑุจุงุญ ุงููููุฉ</div>
                                            </div>
                                            <div
                                                class="bg-white dark:bg-[#2d1a22] p-6 rounded-xl border-2 border-[#e6dbdf] dark:border-[#3d252e] shadow-sm card-hover">
                                                <div class="flex items-center justify-between mb-4">
                                                    <h3 class="text-[#896170] font-medium">ุญุฌูุฒุงุช ููุชููุฉ</h3>
                                                    <span
                                                        class="bg-blue-100 text-blue-600 p-2 rounded-lg material-symbols-outlined text-xl">verified</span>
                                                </div>
                                                <p class="text-3xl font-bold text-blue-600">
                                                    <%= stats ? stats.completedBookings : 0 %>
                                                </p>
                                                <div class="text-[#896170] text-sm mt-2">ูู ุฃุตู <%= stats ?
                                                        stats.totalBookings : 0 %>
                                                </div>
                                            </div>
                                            <div
                                                class="bg-white dark:bg-[#2d1a22] p-6 rounded-xl border-2 border-[#e6dbdf] dark:border-[#3d252e] shadow-sm card-hover">
                                                <div class="flex items-center justify-between mb-4">
                                                    <h3 class="text-[#896170] font-medium">ุทูุจุงุช ูุนููุฉ</h3>
                                                    <span
                                                        class="bg-yellow-100 text-yellow-600 p-2 rounded-lg material-symbols-outlined text-xl">hourglass_empty</span>
                                                </div>
                                                <p class="text-3xl font-bold text-yellow-600">
                                                    <%= stats ? stats.pendingBookings : 0 %>
                                                </p>
                                                <div class="text-[#896170] text-sm mt-2">ุชุญุชุงุฌ ููุงููุฉ</div>
                                            </div>
                                            <div
                                                class="bg-white dark:bg-[#2d1a22] p-6 rounded-xl border-2 border-[#e6dbdf] dark:border-[#3d252e] shadow-sm card-hover">
                                                <div class="flex items-center justify-between mb-4">
                                                    <h3 class="text-[#896170] font-medium">ุงูุชูููู ุงูุนุงู</h3>
                                                    <span
                                                        class="bg-primary/10 text-primary p-2 rounded-lg material-symbols-outlined text-xl">star</span>
                                                </div>
                                                <p class="text-3xl font-bold text-primary">
                                                    <%= stats ? stats.avgRating : '0.0' %>
                                                </p>
                                                <div class="text-[#896170] text-sm mt-2">ุจูุงุกู ุนูู <%= stats ?
                                                        stats.totalReviews : 0 %>
                                                        ุชูููู
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Salon Profile Update -->
                                        <div
                                            class="bg-white dark:bg-[#2d1a22] rounded-xl border-2 border-[#e6dbdf] dark:border-[#3d252e] p-6 mb-8 shadow-sm">
                                            <h2 class="text-xl font-bold mb-6 flex items-center gap-2">
                                                <span class="material-symbols-outlined text-primary">edit_square</span>
                                                <span>ุชุญุฏูุซ ููู ุงูุตุงููู</span>
                                            </h2>
                                            <form action="/dashboard/owner/profile" method="POST"
                                                enctype="multipart/form-data"
                                                class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <div class="space-y-4">
                                                    <div>
                                                        <label for="salonName"
                                                            class="block text-sm font-medium mb-2">ุงุณู
                                                            ุงูุตุงููู</label>
                                                        <input type="text" id="salonName" name="name"
                                                            value="<%= salon.name %>" autocomplete="organization"
                                                            class="w-full p-3 border border-[#e6dbdf] dark:border-[#3d252e] rounded-lg bg-gray-50 dark:bg-[#1a0c10]"
                                                            placeholder="ุงุณู ุงูุตุงููู ุงูุฌุฏูุฏ">
                                                    </div>
                                                    <div>
                                                        <label for="salonLocation"
                                                            class="block text-sm font-medium mb-2">ุงููููุน</label>
                                                        <input type="text" id="salonLocation" name="location"
                                                            value="<%= salon.location %>" autocomplete="street-address"
                                                            class="w-full p-3 border border-[#e6dbdf] dark:border-[#3d252e] rounded-lg bg-gray-50 dark:bg-[#1a0c10]"
                                                            placeholder="ุงูุนููุงู ุจุงูุชูุตูู">
                                                    </div>
                                                    <div>
                                                        <label for="salonPhone"
                                                            class="block text-sm font-medium mb-2">ุฑูู
                                                            ูุงุชู ุงูุตุงููู</label>
                                                        <input type="tel" id="salonPhone" name="phone"
                                                            value="<%= salon.phone %>" autocomplete="tel"
                                                            class="w-full p-3 border border-[#e6dbdf] dark:border-[#3d252e] rounded-lg bg-gray-50 dark:bg-[#1a0c10]"
                                                            placeholder="01xxxxxxxxx">
                                                    </div>
                                                    <div class="md:col-span-2">
                                                        <label for="salonDescription"
                                                            class="block text-sm font-bold mb-2 text-primary">ุนู
                                                            ุงูุตุงููู (ูุตู ูุตูุฑ ุฌุฐุงุจ)</label>
                                                        <textarea id="salonDescription" name="description" rows="4"
                                                            class="w-full p-3 border border-primary/20 rounded-xl bg-primary/5 focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                                            placeholder="ุงูุชุจู ููุง ูุตุฉ ุตุงููููู ููุง ูููุฒู ุนู ุบูุฑู..."><%= salon.description %></textarea>
                                                    </div>
                                                    <div>
                                                        <label for="priceStart"
                                                            class="block text-sm font-medium mb-2 text-primary">ุงูุณุนุฑ
                                                            (ูุจุฏุฃ
                                                            ูู)</label>
                                                        <input type="number" id="priceStart" name="price_start_manual"
                                                            value="<%= salon.price_start_manual %>"
                                                            class="w-full p-3 border border-primary/20 rounded-lg bg-primary/5 font-bold"
                                                            placeholder="ูุซุงู: 150">
                                                    </div>
                                                    <div>
                                                        <label for="mapsUrl" class="block text-sm font-medium mb-2">ุฑุงุจุท
                                                            ุงูุฎุฑูุทุฉ
                                                            (Google
                                                            Maps)</label>
                                                        <input type="url" id="mapsUrl" name="google_maps_url"
                                                            value="<%= salon.google_maps_url %>"
                                                            class="w-full p-3 border border-[#e6dbdf] dark:border-[#3d252e] rounded-lg bg-gray-50 dark:bg-[#1a0c10]"
                                                            placeholder="ุงูุตูู ุฑุงุจุท ูููุน ุตุงูููู ูู ุฎุฑุงุฆุท ุฌูุฌู ููุง">
                                                    </div>
                                                    <div>
                                                        <label for="workingHours"
                                                            class="block text-sm font-medium mb-2">ุณุงุนุงุช ุงูุนูู</label>
                                                        <input type="text" id="workingHours" name="working_hours"
                                                            value="<%= salon.working_hours || '' %>"
                                                            class="w-full p-3 border border-[#e6dbdf] dark:border-[#3d252e] rounded-lg bg-gray-50 dark:bg-[#1a0c10]"
                                                            placeholder="ูุซุงู: ุงูุณุจุช - ุงูุฎููุณ: 9ุต - 10ู">
                                                    </div>
                                                    <div>
                                                        <label for="bookingPolicy"
                                                            class="block text-sm font-medium mb-2 text-red-500">ุณูุงุณุฉ
                                                            ุงูุญุฌุฒ ูุงูุชุฃุฎูุฑ (ุชุญุฐูุฑ ููุนููุงุก)</label>
                                                        <textarea id="bookingPolicy" name="booking_policy" rows="3"
                                                            class="w-full p-3 border border-red-200 dark:border-red-900/30 rounded-lg bg-red-50 dark:bg-red-900/10 placeholder-red-300"
                                                            placeholder="ูุซุงู: ูุฑุฌู ุงูุญุถูุฑ ูุจู ุงูููุนุฏ ุจู 10 ุฏูุงุฆู. ุงูุชุฃุฎูุฑ ุฃูุซุฑ ูู 15 ุฏูููุฉ ูุคุฏู ูุฅูุบุงุก ุงูุญุฌุฒ."><%= salon.booking_policy || '' %></textarea>
                                                    </div>

                                                    <!-- Bridal Package Section -->
                                                    <div
                                                        class="mt-6 p-4 border-2 border-primary/20 rounded-xl bg-primary/5">
                                                        <h3 class="font-bold text-primary mb-4 flex items-center gap-2">
                                                            <span class="material-symbols-outlined">celebration</span>
                                                            <span>ุจุงูุฉ ุงูุนุฑูุณ ุงูุญุตุฑูุฉ</span>
                                                        </h3>
                                                        <div class="space-y-4">
                                                            <div>
                                                                <label for="bridalTitle"
                                                                    class="block text-xs font-bold mb-1">ุนููุงู
                                                                    ุงูุจุงูุฉ</label>
                                                                <input type="text" id="bridalTitle" name="bridal_title"
                                                                    value="<%= salon.bridal_title %>"
                                                                    class="w-full p-2 border border-[#e6dbdf] dark:border-[#3d252e] rounded-lg bg-white dark:bg-[#2d1a22]"
                                                                    placeholder="ูุซุงู: ุจุงูุฉ ุงูุนุฑูุณ ุงูููููุฉ">
                                                            </div>
                                                            <div>
                                                                <label for="bridalDesc"
                                                                    class="block text-xs font-bold mb-1">ูุตู
                                                                    ุงูุนุฑุถ</label>
                                                                <textarea id="bridalDesc" name="bridal_desc"
                                                                    class="w-full p-2 border border-[#e6dbdf] dark:border-[#3d252e] rounded-lg bg-white dark:bg-[#2d1a22]"
                                                                    rows="2"
                                                                    placeholder="ูุงุฐุง ุชุดูู ุงูุจุงูุฉุ"><%= salon.bridal_desc %></textarea>
                                                            </div>
                                                            <div>
                                                                <label for="bridalServices"
                                                                    class="block text-xs font-bold mb-1">ุงูุฎุฏูุงุช
                                                                    ุงููุถููุฉ
                                                                    (ุงูุตูู ุจูููุง ุจูุงุตูุฉ)</label>
                                                                <textarea id="bridalServices" name="bridal_services"
                                                                    class="w-full p-2 border border-[#e6dbdf] dark:border-[#3d252e] rounded-lg bg-white dark:bg-[#2d1a22]"
                                                                    rows="2"
                                                                    placeholder="ูุซุงู: ูููุงุฌุ ุชุตููู ุดุนุฑุ ุชูุธูู ุจุดุฑุฉ"><%= salon.bridal_services %></textarea>
                                                            </div>
                                                            <div class="grid grid-cols-2 gap-4">
                                                                <div>
                                                                    <label for="bridalPrice"
                                                                        class="block text-xs font-bold mb-1">ุงูุณุนุฑ
                                                                        ุงูุฃุตูู
                                                                        (ุฌ.ู)</label>
                                                                    <input type="number" id="bridalPrice"
                                                                        name="bridal_price"
                                                                        value="<%= salon.bridal_price %>"
                                                                        class="w-full p-2 border border-[#e6dbdf] dark:border-[#3d252e] rounded-lg bg-white dark:bg-[#2d1a22]"
                                                                        placeholder="3000">
                                                                </div>
                                                                <div>
                                                                    <label for="bridalDiscount"
                                                                        class="block text-xs font-bold mb-1">ูุณุจุฉ ุงูุฎุตู
                                                                        (%)</label>
                                                                    <input type="number" id="bridalDiscount"
                                                                        name="bridal_discount"
                                                                        value="<%= salon.bridal_discount %>"
                                                                        class="w-full p-2 border border-[#e6dbdf] dark:border-[#3d252e] rounded-lg bg-white dark:bg-[#2d1a22]"
                                                                        placeholder="30">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="space-y-4 flex flex-col h-full">
                                                    <div class="space-y-4 flex-1 flex flex-col">
                                                        <label class="block text-sm font-medium mb-2">ุตูุฑุฉ ุงูุตุงููู
                                                            ุงูุญุงููุฉ /
                                                            ุงููุนุงููุฉ</label>
                                                        <div class="relative group flex-1 min-h-[400px]">
                                                            <div
                                                                class="w-full h-full rounded-[2.5rem] overflow-hidden border-2 border-dashed border-[#e6dbdf] dark:border-[#3d252e] bg-gray-50 dark:bg-[#1a0c10] flex items-center justify-center relative transition-all group-hover:border-primary/50 shadow-inner">
                                                                <img id="imagePreview" src="<%= salon.image_url %>"
                                                                    alt="Preview"
                                                                    class="w-full h-full object-cover <%= !salon.image_url ? 'hidden' : '' %>">
                                                                <div id="previewPlaceholder"
                                                                    class="<%= salon.image_url ? 'hidden' : '' %> flex flex-col items-center text-[#896170]">
                                                                    <span
                                                                        class="material-symbols-outlined text-6xl mb-4 opacity-20">image</span>
                                                                    <span class="font-black text-lg opacity-40">ูู ูุชู
                                                                        ุงุฎุชูุงุฑ
                                                                        ุตูุฑุฉ
                                                                        ุจุนุฏ</span>
                                                                    <p class="text-xs mt-2 opacity-40">ุงุถุบุทู ููุง ููุฑูุน
                                                                    </p>
                                                                </div>
                                                                <div
                                                                    class="absolute inset-0 bg-primary/20 backdrop-blur-[2px] opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center">
                                                                    <button type="button"
                                                                        onclick="document.getElementById('salonImage').click()"
                                                                        class="bg-white text-primary px-8 py-4 rounded-2xl font-black shadow-2xl transform scale-90 group-hover:scale-100 transition-all">
                                                                        <span class="flex items-center gap-2">
                                                                            <span
                                                                                class="material-symbols-outlined">upload_file</span>
                                                                            ุชุบููุฑ ุตูุฑุฉ ุงูุตุงููู
                                                                        </span>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <input type="file" id="salonImage" name="salon_image"
                                                                class="hidden" accept="image/*"
                                                                onchange="previewImage(this)">
                                                        </div>

                                                        <div
                                                            class="mt-4 p-4 bg-primary/5 rounded-2xl border border-primary/10">
                                                            <p class="text-xs text-[#896170] leading-relaxed">
                                                                <span class="font-black text-primary">ูุตูุญุฉ:</span>
                                                                ูุฐู ุงูุตูุฑุฉ ูู ุฃูู ูุง ุชุฑุงู ุงูุนูููุงุช ูู ูุชุงุฆุฌ ุงูุจุญุซ ูุตูุญุฉ
                                                                ุงูุตุงููู.
                                                                ุงุฎุชุงุฑู
                                                                ุตูุฑุฉ ุชุนูุณ ุฌูุงู ุตุงููููู ูุงุญุชุฑุงููุชู.
                                                            </p>
                                                        </div>
                                                        <!-- Personal Photo / Avatar Upload -->
                                                        <div
                                                            class="mt-8 p-6 bg-gray-50 dark:bg-[#1a0c10] rounded-3xl border border-[#e6dbdf] dark:border-[#3d252e]">
                                                            <h3 class="font-black text-sm mb-4 flex items-center gap-2">
                                                                <span
                                                                    class="material-symbols-outlined text-primary">face_6</span>
                                                                <span>ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ (ุงูุงูุชุงุฑ ุงูุดุฎุตู)</span>
                                                            </h3>
                                                            <div class="flex items-center gap-6">
                                                                <div class="relative size-24 shrink-0 group">
                                                                    <div
                                                                        class="w-full h-full rounded-2xl overflow-hidden border-2 border-primary/20 bg-white dark:bg-[#2d1a22] flex items-center justify-center shadow-inner">
                                                                        <img id="avatarPreview"
                                                                            src="<%= user.avatar || `https://ui-avatars.com/api/?name=${user.name}&background=ff4d8d&color=fff` %>"
                                                                            class="w-full h-full object-cover object-center">
                                                                    </div>
                                                                    <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center rounded-2xl cursor-pointer"
                                                                        onclick="document.getElementById('avatarInput').click()">
                                                                        <span
                                                                            class="material-symbols-outlined text-white">upload</span>
                                                                    </div>
                                                                </div>
                                                                <div class="flex-1">
                                                                    <p class="text-xs font-bold mb-2">ุงุฑูุนู ุตูุฑุชูู
                                                                        ุงูุดุฎุตูุฉ
                                                                    </p>
                                                                    <p
                                                                        class="text-[10px] text-[#896170] leading-relaxed">
                                                                        ูุฐู
                                                                        ุงูุตูุฑุฉ
                                                                        ุณุชุธูุฑ ูู ุฃุนูู ุงููููุน ูุชุฌุนู ุญุณุงุจูู ุฃูุซุฑ ุฎุตูุตูุฉ
                                                                        ูุฌูุงูุงู.
                                                                    </p>
                                                                    <input type="file" id="avatarInput"
                                                                        name="avatar_image" class="hidden"
                                                                        accept="image/*" onchange="previewAvatar(this)">
                                                                    <button type="button"
                                                                        onclick="document.getElementById('avatarInput').click()"
                                                                        class="mt-3 text-[10px] font-black text-primary hover:underline uppercase tracking-widest">ุชุบููุฑ
                                                                        ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ</button>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                        </div>

                                        <!-- Full Width Button at Bottom -->
                                        <div
                                            class="md:col-span-2 pt-8 border-t border-[#e6dbdf] dark:border-[#3d252e] mt-4">
                                            <button type="submit"
                                                class="w-full max-w-sm mx-auto flex items-center justify-center gap-3 gradient-bg text-white py-4 rounded-2xl font-black text-lg shadow-xl hover:shadow-2xl hover:scale-[1.02] transition-all shimmer">
                                                <span class="material-symbols-outlined">save</span>
                                                ุญูุธ ุฌููุน ุงูุชุนุฏููุงุช
                                            </button>
                                        </div>
                                        </form>
    </div>

    <script>
        function previewImage(input) {
            const preview = document.getElementById('imagePreview');
            const placeholder = document.getElementById('previewPlaceholder');
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    preview.src = e.target.result;
                    preview.classList.remove('hidden');
                    placeholder.classList.add('hidden');
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        function previewAvatar(input) {
            const preview = document.getElementById('avatarPreview');
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    preview.src = e.target.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>

    <!-- Recent Bookings Table -->
    <div
        class="bg-white dark:bg-[#2d1a22] rounded-xl border-2 border-[#e6dbdf] dark:border-[#3d252e] overflow-hidden shadow-sm">
        <div class="p-6 border-b border-[#e6dbdf] dark:border-[#3d252e] flex items-center justify-between">
            <h2 class="text-lg font-bold">ุขุฎุฑ ุงูุญุฌูุฒุงุช</h2>
            <a href="/dashboard/owner/bookings" class="text-primary text-sm font-bold hover:underline">ุนุฑุถ
                ุงููู</a>
        </div>
        <div class="overflow-x-auto">
            <table class="w-full text-sm text-right">
                <thead class="bg-gray-50 dark:bg-[#3d252e] text-[#896170]">
                    <tr>
                        <th class="px-6 py-4 font-medium">ุงุณู ุงูุนููู</th>
                        <th class="px-6 py-4 font-medium">ุงูุฎุฏูุฉ</th>
                        <th class="px-6 py-4 font-medium">ุงูุชุงุฑูุฎ ูุงูููุช</th>
                        <th class="px-6 py-4 font-medium">ุงูุญุงูุฉ</th>
                        <th class="px-6 py-4 font-medium">ุงูุณุนุฑ</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-[#e6dbdf] dark:divide-[#3d252e]">
                    <% if (recentBookings && recentBookings.length> 0) { %>
                        <% recentBookings.forEach(function(booking) { %>
                            <tr class="hover:bg-gray-50 dark:hover:bg-[#1a0c10] transition-colors">
                                <td class="px-6 py-4 font-bold">
                                    <%= booking.customer_name %>
                                </td>
                                <td class="px-6 py-4">
                                    <%= booking.service_name || 'ุจุงูุฉ ุงูุนุฑูุณ' %>
                                </td>
                                <td class="px-6 py-4">
                                    <%= new Date(booking.booking_date).toLocaleDateString('ar-EG') %> - <%=
                                            booking.booking_time %>
                                </td>
                                <td class="px-6 py-4">
                                    <span
                                        class="px-2 py-1 rounded text-xs font-bold <%= booking.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800' %>">
                                        <%= booking.status==='pending' ? 'ููุฏ ุงูุงูุชุธุงุฑ' : (booking.status==='confirmed'
                                            ? 'ูุคูุฏ' : 'ููุชูู' ) %>
                                    </span>
                                </td>
                                <td class="px-6 py-4 font-bold text-primary">
                                    <%= booking.amount %> ุฌ.ู
                                </td>
                            </tr>
                            <% }); %>
                                <% } else { %>
                                    <tr>
                                        <td colspan="5" class="px-6 py-8 text-center text-[#896170] italic">
                                            ูุง ุชูุฌุฏ ุญุฌูุฒุงุช ุญุฏูุซุฉ</td>
                                    </tr>
                                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
    </main>
    </div>
</body>

</html>