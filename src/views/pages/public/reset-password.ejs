<!DOCTYPE html>
<html class="light" dir="<%= locale === 'ar' ? 'rtl' : 'ltr' %>" lang="<%= locale %>">

<head>
    <%- include('../../partials/head') %>
</head>

<body
    class="bg-background-light dark:bg-background-dark text-[#181113] dark:text-white transition-colors duration-200 noise-bg min-h-screen flex items-center justify-center p-4">
    <div
        class="w-full max-w-5xl h-[80vh] min-h-[650px] grid lg:grid-cols-2 rounded-[3rem] overflow-hidden shadow-premium glass border border-white/20 dark:border-white/5 animate-scale-in">

        <!-- Left Side: Brand Side -->
        <div class="hidden lg:flex flex-col justify-between p-16 gradient-bg relative overflow-hidden text-white">
            <div
                class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/clean-gray-paper.png')]">
            </div>
            <div class="absolute -top-32 -right-32 size-64 bg-white/10 rounded-full blur-3xl animate-pulse"></div>

            <div class="relative z-10">
                <a href="/"
                    class="inline-flex items-center gap-4 bg-white/20 p-5 rounded-[2rem] backdrop-blur-2xl border border-white/20 mb-16 hover:bg-white/30 transition-all btn-bounce">
                    <span class="material-symbols-outlined filled text-4xl">diamond</span>
                    <span class="font-black text-3xl tracking-tight">كوافير</span>
                </a>
            </div>

            <div class="relative z-10">
                <h2 class="text-6xl font-black leading-tight mb-8">كلمة سر <br> <span class="opacity-80">جديدة</span>
                </h2>
                <p class="text-white/80 text-xl font-bold max-w-xs leading-relaxed">اختاري كلمة سر قوية وسهلة التذكر
                    لتأمين حسابكِ بشكل كامل.</p>
            </div>

            <div
                class="relative z-10 flex items-center gap-5 bg-white/10 p-6 rounded-[2rem] backdrop-blur-md border border-white/10">
                <div class="size-14 bg-white rounded-2xl flex items-center justify-center text-primary shadow-xl">
                    <span class="material-symbols-outlined text-3xl">verified_user</span>
                </div>
                <div>
                    <p class="font-black text-xl">أمان متكامل</p>
                    <p class="text-xs text-white/60 uppercase tracking-widest mt-1">تشفير عالي المستوى</p>
                </div>
            </div>
        </div>

        <!-- Right Side: Form Side -->
        <div class="p-12 lg:p-16 flex flex-col justify-center relative bg-white dark:bg-[#12080a] overflow-hidden">
            <div class="absolute top-10 left-10">
                <%- include('../../partials/theme-toggle') %>
            </div>

            <div class="mb-10 animate-slide-up">
                <h1 class="text-4xl md:text-5xl font-black mb-4">تغيير كلمة السر</h1>
                <p class="text-[#896170] dark:text-gray-400 font-bold text-lg">أدخلي كلمة السر الجديدة أدناه</p>
            </div>

            <!-- Flash Messages -->
            <%- include('../../partials/flash') %>

                <form action="/reset-password/<%= token %>" method="POST" class="space-y-8 animate-slide-up"
                    style="animation-delay: 100ms" id="resetForm">
                    <div class="space-y-3">
                        <label for="password" class="text-xs font-black uppercase text-[#896170] mr-2">كلمة السر
                            الجديدة</label>
                        <div class="group relative">
                            <span
                                class="material-symbols-outlined absolute right-6 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-primary transition-all duration-300 text-2xl">lock</span>
                            <input type="password" id="password" name="password" required
                                class="w-full h-16 pr-16 pl-6 rounded-2xl border-2 border-gray-50 dark:border-[#2d1a22] bg-gray-50/50 dark:bg-[#1a0c10] focus:border-primary/50 focus:bg-white dark:focus:bg-[#2d1a22] transition-all outline-none font-bold text-lg"
                                placeholder="••••••••">
                        </div>
                    </div>

                    <div class="space-y-3">
                        <label for="confirmPassword" class="text-xs font-black uppercase text-[#896170] mr-2">تأكيد كلمة
                            السر</label>
                        <div class="group relative">
                            <span
                                class="material-symbols-outlined absolute right-6 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-primary transition-all duration-300 text-2xl">lock_check</span>
                            <input type="password" id="confirmPassword" name="confirmPassword" required
                                class="w-full h-16 pr-16 pl-6 rounded-2xl border-2 border-gray-50 dark:border-[#2d1a22] bg-gray-50/50 dark:bg-[#1a0c10] focus:border-primary/50 focus:bg-white dark:focus:bg-[#2d1a22] transition-all outline-none font-bold text-lg"
                                placeholder="••••••••">
                        </div>
                    </div>

                    <div class="pt-4">
                        <button type="submit"
                            class="w-full h-18 gradient-bg text-white rounded-[2rem] font-black text-2xl shadow-2xl shadow-primary/30 btn-bounce shimmer">
                            <span>حـفـظ التـغـيـيـرات</span>
                        </button>
                    </div>
                </form>
        </div>
    </div>

    <script>
        document.getElementById('resetForm').addEventListener('submit', function (e) {
            const pass = document.getElementById('password').value;
            const confirm = document.getElementById('confirmPassword').value;

            if (pass !== confirm) {
                e.preventDefault();
                alert('كلمات السر غير متطابقة!');
                return;
            }

            const btn = this.querySelector('button[type="submit"]');
            btn.disabled = true;
            btn.innerHTML = '<span class="material-symbols-outlined animate-spin">sync</span> جاري الحفظ...';
        });
    </script>
</body>

</html>